<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>高效编写动画代码的技巧 | Taoya</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/favicon.ico">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+TC|Open+Sans|Poppins|Source+Sans+Pro|Ubuntu&amp;display=swap">
    <script src="/parallax.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/gsap/3.2.6/gsap.min.js"></script>
    <meta name="description" content="多言数穷，不如守中">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/assets/css/0.styles.fbc29428.css" as="style"><link rel="preload" href="/assets/js/app.2934c869.js" as="script"><link rel="preload" href="/assets/js/7.96aa0c69.js" as="script"><link rel="preload" href="/assets/js/44.b0216088.js" as="script"><link rel="prefetch" href="/assets/js/1.d886842f.js"><link rel="prefetch" href="/assets/js/10.b4cbacd4.js"><link rel="prefetch" href="/assets/js/11.5a820701.js"><link rel="prefetch" href="/assets/js/12.5d3cae48.js"><link rel="prefetch" href="/assets/js/13.6d61fc90.js"><link rel="prefetch" href="/assets/js/14.54e547ee.js"><link rel="prefetch" href="/assets/js/15.4c18c262.js"><link rel="prefetch" href="/assets/js/16.df779644.js"><link rel="prefetch" href="/assets/js/17.51c1142c.js"><link rel="prefetch" href="/assets/js/18.c2ba6705.js"><link rel="prefetch" href="/assets/js/19.afccd4f0.js"><link rel="prefetch" href="/assets/js/2.258cf35c.js"><link rel="prefetch" href="/assets/js/20.9523cfa0.js"><link rel="prefetch" href="/assets/js/21.02d839bd.js"><link rel="prefetch" href="/assets/js/22.c1d1793f.js"><link rel="prefetch" href="/assets/js/23.7460123d.js"><link rel="prefetch" href="/assets/js/24.057d205c.js"><link rel="prefetch" href="/assets/js/25.ba1eca7d.js"><link rel="prefetch" href="/assets/js/26.d87b38f7.js"><link rel="prefetch" href="/assets/js/27.fe61ab21.js"><link rel="prefetch" href="/assets/js/28.affd45f0.js"><link rel="prefetch" href="/assets/js/29.093dd35e.js"><link rel="prefetch" href="/assets/js/30.f9351291.js"><link rel="prefetch" href="/assets/js/31.406ddb6b.js"><link rel="prefetch" href="/assets/js/32.41556839.js"><link rel="prefetch" href="/assets/js/33.8651953c.js"><link rel="prefetch" href="/assets/js/34.402eb21e.js"><link rel="prefetch" href="/assets/js/35.528b492d.js"><link rel="prefetch" href="/assets/js/36.b6516203.js"><link rel="prefetch" href="/assets/js/37.9d43c85f.js"><link rel="prefetch" href="/assets/js/38.5b159c2e.js"><link rel="prefetch" href="/assets/js/39.ae794843.js"><link rel="prefetch" href="/assets/js/40.a68a1004.js"><link rel="prefetch" href="/assets/js/41.417cd709.js"><link rel="prefetch" href="/assets/js/42.b3c814d1.js"><link rel="prefetch" href="/assets/js/43.70442cf7.js"><link rel="prefetch" href="/assets/js/45.0ea716a8.js"><link rel="prefetch" href="/assets/js/46.9e85ca44.js"><link rel="prefetch" href="/assets/js/47.1e1a704a.js"><link rel="prefetch" href="/assets/js/48.44fe07a4.js"><link rel="prefetch" href="/assets/js/49.a1f05ac5.js"><link rel="prefetch" href="/assets/js/5.a5f98c38.js"><link rel="prefetch" href="/assets/js/50.b19afa89.js"><link rel="prefetch" href="/assets/js/51.914d1a8e.js"><link rel="prefetch" href="/assets/js/52.b4ba59d1.js"><link rel="prefetch" href="/assets/js/53.94234cfe.js"><link rel="prefetch" href="/assets/js/54.3c8d7352.js"><link rel="prefetch" href="/assets/js/55.97703121.js"><link rel="prefetch" href="/assets/js/56.b097d1b9.js"><link rel="prefetch" href="/assets/js/57.dbe97c76.js"><link rel="prefetch" href="/assets/js/58.be101d03.js"><link rel="prefetch" href="/assets/js/59.2b707b42.js"><link rel="prefetch" href="/assets/js/6.54279ef5.js"><link rel="prefetch" href="/assets/js/60.8dc3ecd1.js"><link rel="prefetch" href="/assets/js/61.3abd3d2d.js"><link rel="prefetch" href="/assets/js/62.6efd2868.js"><link rel="prefetch" href="/assets/js/63.a0aa1079.js"><link rel="prefetch" href="/assets/js/64.0ed67c1f.js"><link rel="prefetch" href="/assets/js/65.62c07d05.js"><link rel="prefetch" href="/assets/js/66.c1d457b0.js"><link rel="prefetch" href="/assets/js/67.84445610.js"><link rel="prefetch" href="/assets/js/68.ef96b3be.js"><link rel="prefetch" href="/assets/js/69.5cbd049c.js"><link rel="prefetch" href="/assets/js/70.a83eed2c.js"><link rel="prefetch" href="/assets/js/71.d8caec13.js"><link rel="prefetch" href="/assets/js/72.74b9dc75.js"><link rel="prefetch" href="/assets/js/73.d8fb1905.js"><link rel="prefetch" href="/assets/js/74.c7872994.js"><link rel="prefetch" href="/assets/js/75.24e28d2a.js"><link rel="prefetch" href="/assets/js/76.22bcdf40.js"><link rel="prefetch" href="/assets/js/77.cdbbc4d9.js"><link rel="prefetch" href="/assets/js/78.fcb7b111.js"><link rel="prefetch" href="/assets/js/8.31b10017.js"><link rel="prefetch" href="/assets/js/9.24d6651a.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.eb9498ce.js">
    <link rel="stylesheet" href="/assets/css/0.styles.fbc29428.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="taolin"><header class="tl-header"><div class="wrap"><div class="tl-logo"><h1><a href="/" class="router-link-active"><svg width="360" height="360" viewBox="0 0 360 360" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0)"><rect width="360" height="360" fill="black"></rect> <path d="M314 217.328C314 222.203 312.453 228.719 309.359 236.875C301.391 258.25 286.109 274.703 263.516 286.234C243.734 296.359 221.469 301.422 196.719 301.422C163.25 301.422 137.984 292.516 120.922 274.703C105.453 258.578 97.7188 236.5 97.7188 208.469C97.7188 186.062 103.016 162.484 113.609 137.734C121.016 120.672 128.562 107.266 136.25 97.5156C109.438 100.516 85.4375 110.406 64.25 127.188C63.125 128.406 62.375 128.312 62 126.906C60.0312 114.344 57.4531 93.9062 54.2656 65.5938C54.3594 65.0312 54.9219 64.5625 55.9531 64.1875C130.203 70.4688 207.5 73.6094 287.844 73.6094C289.438 73.6094 290 74.5938 289.531 76.5625C279.688 115.281 273.641 146.266 271.391 169.516C264.641 168.484 255.922 166.75 245.234 164.312C240.172 162.625 237.641 160.047 237.641 156.578C237.641 154.703 238.344 150.531 239.75 144.062C241.25 137.5 242 132.625 242 129.438C242 124.844 240.547 121.609 237.641 119.734C220.859 108.672 207.547 102.438 197.703 101.031C180.734 133 172.25 168.391 172.25 207.203C172.25 228.766 175.484 246.484 181.953 260.359C188.891 275.453 198.453 283 210.641 283C219.734 283 229.719 279.391 240.594 272.172C250.719 265.328 255.781 259.797 255.781 255.578C255.781 253.891 255.219 253.047 254.094 253.047C239.938 250.891 227.797 246.25 217.672 239.125C205.672 230.781 199.672 220.656 199.672 208.75C199.672 202.375 203.891 197.125 212.328 193C220.859 188.875 232.391 186.812 246.922 186.812C253.391 186.812 260.984 187.375 269.703 188.5C299.234 192.438 314 202.047 314 217.328Z" fill="white"></path></g> <defs><clipPath id="clip0"><rect width="360" height="360" fill="white"></rect></clipPath></defs></svg></a></h1> <span>Taoya</span></div> <nav class="tl-menu"><ul class="tl-menu-list"><li class="tl-menu-item"><a href="/blog/"><span>技术</span> <svg xmlns="http://www.w3.org/2000/svg" width="38" height="4" viewBox="0 0 53 4" fill="none"><g clip-path="url(#clip0)"><path d="M51.9 3C49 3 49 1 46.2 1c-2.8 0-2.8 2-5.7 2-2.8 0-2.8-2-5.7-2C32 1 32 3 29.1 3c-2.8 0-2.8-2-5.7-2-2.8 0-2.8 2-5.6 2S15 1 12.1 1C9.5 1 9.5 3 6.7 3 3.8 3 3.8 1 1 1" stroke="#404040" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0"><rect width="52.9" height="4" fill="#404040"></rect></clipPath></defs></svg></a></li><li class="tl-menu-item"><a href="/about/"><span>关于</span> <svg xmlns="http://www.w3.org/2000/svg" width="38" height="4" viewBox="0 0 53 4" fill="none"><g clip-path="url(#clip0)"><path d="M51.9 3C49 3 49 1 46.2 1c-2.8 0-2.8 2-5.7 2-2.8 0-2.8-2-5.7-2C32 1 32 3 29.1 3c-2.8 0-2.8-2-5.7-2-2.8 0-2.8 2-5.6 2S15 1 12.1 1C9.5 1 9.5 3 6.7 3 3.8 3 3.8 1 1 1" stroke="#404040" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0"><rect width="52.9" height="4" fill="#404040"></rect></clipPath></defs></svg></a></li><li class="tl-menu-item"><a href="/life/"><span>记录</span> <svg xmlns="http://www.w3.org/2000/svg" width="38" height="4" viewBox="0 0 53 4" fill="none"><g clip-path="url(#clip0)"><path d="M51.9 3C49 3 49 1 46.2 1c-2.8 0-2.8 2-5.7 2-2.8 0-2.8-2-5.7-2C32 1 32 3 29.1 3c-2.8 0-2.8-2-5.7-2-2.8 0-2.8 2-5.6 2S15 1 12.1 1C9.5 1 9.5 3 6.7 3 3.8 3 3.8 1 1 1" stroke="#404040" stroke-width="2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path></g><defs><clipPath id="clip0"><rect width="52.9" height="4" fill="#404040"></rect></clipPath></defs></svg></a></li></ul> <div class="tl-menu-trigger"><button class="menu-btn"><svg viewBox="0 0 64 48"><path d="M19,15 L45,15 C70,15 58,-2 49.0177126,7 L19,37"></path> <path d="M19,24 L45,24 C61.2371586,24 57,49 41,33 L32,24"></path> <path d="M45,33 L19,33 C-8,33 6,-2 22,14 L45,37"></path></svg></button></div> <div class="tl-hamburger"><div class="menu-secondary-background-color"></div> <div class="tl-menu-overlay"><div class="tl-f-nav-list"><div class="menu-background"></div> <div class="container"><div class="tl-f-nav-col"><h3 class="tl-f-nav-item"><a href="/blog"><div class="inner"><div class="tl-menu-content"><div class="tl-menu-index">
                                       01
                                   </div> <div class="tl-menu-name">
                                       技术
                                   </div></div> <div class="tl-menu-icon"><div class="tl-menu-icon_typeSVG"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17"><g fill="none" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" transform="rotate(-135 7.533 9.872)"><path d="M7.80044955,21.4512363 L7.81236952,0.231533347" style="stroke-dashoffset:0;stroke-dasharray:22.2197px, 32.2197px;"></path> <path d="M15.601 13.651 7.8 21.451 0 13.651" style="stroke-dashoffset:0;stroke-dasharray:none;"></path></g></svg></div></div> <div class="tl-menu-border"></div></div></a></h3><h3 class="tl-f-nav-item"><a href="/about"><div class="inner"><div class="tl-menu-content"><div class="tl-menu-index">
                                       02
                                   </div> <div class="tl-menu-name">
                                       关于
                                   </div></div> <div class="tl-menu-icon"><div class="tl-menu-icon_typeSVG"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17"><g fill="none" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" transform="rotate(-135 7.533 9.872)"><path d="M7.80044955,21.4512363 L7.81236952,0.231533347" style="stroke-dashoffset:0;stroke-dasharray:22.2197px, 32.2197px;"></path> <path d="M15.601 13.651 7.8 21.451 0 13.651" style="stroke-dashoffset:0;stroke-dasharray:none;"></path></g></svg></div></div> <div class="tl-menu-border"></div></div></a></h3><h3 class="tl-f-nav-item"><a href="/life"><div class="inner"><div class="tl-menu-content"><div class="tl-menu-index">
                                       03
                                   </div> <div class="tl-menu-name">
                                       生活记录
                                   </div></div> <div class="tl-menu-icon"><div class="tl-menu-icon_typeSVG"><svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 17 17"><g fill="none" fill-rule="evenodd" stroke="#000" stroke-linecap="round" stroke-linejoin="round" transform="rotate(-135 7.533 9.872)"><path d="M7.80044955,21.4512363 L7.81236952,0.231533347" style="stroke-dashoffset:0;stroke-dasharray:22.2197px, 32.2197px;"></path> <path d="M15.601 13.651 7.8 21.451 0 13.651" style="stroke-dashoffset:0;stroke-dasharray:none;"></path></g></svg></div></div> <div class="tl-menu-border"></div></div></a></h3></div></div></div></div></div></nav></div></header> <div id="article-post" data-scroll=""><main class="container"><div class="back"><div class="icon-wrap"><svg aria-hidden="true" class="icon"><use xlink:href="#icon-fanhui"></use></svg></div></div> <header><h1 class="title">高效编写动画代码的技巧</h1> <div class="time"><span class="month">05</span> <span>/ <span>10</span></span></div></header> <article class="tl-article-container"><!----> <div class="content__default"><h3 id="使用动画库"><a href="#使用动画库" class="header-anchor"></a> 使用动画库</h3> <p>浏览器技术</p> <ul><li>CSS过渡</li> <li>CSS动画</li> <li>WEB Animations API</li></ul> <p><strong>其他一些要考虑的因素</strong></p> <ul><li><p>**浏览器错误，不一致和兼容性：**动画库（例如GSAP）可以为您解决这些问题，并且具有普遍兼容性。您甚至可以在IE9中使用运动路径！跨浏览器问题有很多问题领域，包括<code>transform-origin</code>SVG元素的处理，路径笔划测量，Safari中的3D原点，还有许多我们没有列出的空间。</p></li> <li><p>**动画工作流程：**使用GSAP之类的工具，即使是中等复杂的动画，也可以更快，更有趣。您可以对动画进行模块化，根据需要嵌套它们的深度，并自动调整其时间。</p></li> <li><p><strong>超越DOM进行动画处理：</strong> Canvas，WebGL</p></li> <li><p>**运行时控制：**使用良好的动画库可以使您暂停，恢复，倒转，搜索甚至逐步改变整个动画序列的速度。</p></li> <li><p><strong>缓动选项（弹跳，弹性等）</strong></p></li> <li><p><strong>滞后平滑</strong></p></li></ul> <h3 id="_2-使用时间表"><a href="#_2-使用时间表" class="header-anchor"></a> 2.使用时间表</h3> <p>好的动画库将提供创建单个动画（称为<em>补间</em>）的某种方式，以及在<em>时间轴上</em>对动画进行排序的方式。可以将时间轴想像为补间的容器，在其中您将补间相对放置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> tl <span class="token operator">=</span> gsap<span class="token punctuation">.</span><span class="token function">timeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
tl<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> backgroundColor<span class="token operator">:</span> <span class="token string">&quot;#f38630&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;+=0.5&quot;</span><span class="token punctuation">)</span> 
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> rotation<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">360</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;+=0.5&quot;</span><span class="token punctuation">)</span>
</code></pre></div><blockquote><p>在GSAP中，默认情况下，添加到时间轴的补间将在运行之前等待先前的补间完成。这样<code>+=0.5</code>还会增加一个额外的偏移量或半秒的延迟，因此无论第一个补间的持续时间有多长，第二个补间将在第一个补间结束后0.5秒开始</p> <p>要将补间之间的时间增加到1秒，您需要做的就是将更<code>+=0.5</code>改为<code>+=1</code>！超级容易。使用这种方法，您可以快速迭代动画，而不必担心进行数学运算以合并先前的持续时间。</p></blockquote> <h3 id="_3-使用相对值"><a href="#_3-使用相对值" class="header-anchor"></a> 3.使用相对值</h3> <p>相对于其当前值进行动画处理。GSAP 为此识别<code>+=</code>并加上<code>-=</code>前缀。因此<code>x: &quot;+=200&quot;</code>会将200个单位（通常为像素）添加到current中<code>x</code>。并将<code>x: &quot;-=200&quot;</code>从当前值中减去200。</p> <h3 id="_4-使用关键帧"><a href="#_4-使用关键帧" class="header-anchor"></a> 4. 使用关键帧</h3> <p>如果您发现自己连续为同一目标设置动画，那是使用关键帧的绝佳时机！</p> <div class="language-js extra-class"><pre class="language-js"><code>gsap<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> keyframes<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> backgroundColor<span class="token operator">:</span> <span class="token string">&quot;#f38630&quot;</span><span class="token punctuation">,</span> delay<span class="token operator">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
  <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> rotation<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">360</span><span class="token punctuation">,</span> delay<span class="token operator">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>无需时间表！为了隔开补间，我们仅<code>delay</code>在每个关键帧中使用该属性。（创建重叠可能为负。）</p></blockquote> <h3 id="_5-使用智能默认设置"><a href="#_5-使用智能默认设置" class="header-anchor"></a> 5. 使用智能默认设置</h3> <p>要更改GSAP的全局默认设置，请使用<code>gsap.defaults()</code></p> <div class="language-js extra-class"><pre class="language-js"><code>gsap<span class="token punctuation">.</span><span class="token function">defaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span> ease<span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>例子</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> tl <span class="token operator">=</span> gsap<span class="token punctuation">.</span><span class="token function">timeline</span><span class="token punctuation">(</span><span class="token punctuation">{</span> defaults<span class="token operator">:</span> <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
tl<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> backgroundColor<span class="token operator">:</span> <span class="token string">&quot;#f38630&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;+=0.5&quot;</span><span class="token punctuation">)</span> 
  <span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> rotation<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">360</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;+=0.5&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_6-一次对多个元素进行动画处理"><a href="#_6-一次对多个元素进行动画处理" class="header-anchor"></a> 6. 一次对多个元素进行动画处理</h3> <p>只要元素具有相同的类型（选择器字符串，变量引用，通用对象等），就可以传递变量引用数组</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> circle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.circle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


gsap<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token punctuation">[</span>box<span class="token punctuation">,</span> circle<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-模块动画"><a href="#_7-模块动画" class="header-anchor"></a> 7. 模块动画</h3> <p>模块化是编程的关键原理之一。它允许您构建小的，易于理解的块，可以将它们组合成更大的作品，同时仍保持事物的整洁，可重用和易于修改。</p> <h4 id="功能"><a href="#功能" class="header-anchor"></a> 功能</h4> <p>使用函数返回补间或时间轴，然后将其插入主时间轴</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	
    <span class="token comment">// 返回</span>
  <span class="token keyword">return</span> gsap<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token string">&quot;.myElem&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> color<span class="token operator">:</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

tl<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token function">doAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>嵌套时间表可以真正改变您的动画制作方式。它使您可以轻松地对<em>真正</em>复杂的动画进行排序，同时保持代码的模块化和可读性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">doAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> tl <span class="token operator">=</span> gsap<span class="token punctuation">.</span><span class="token function">timeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  tl<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  tl<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  
  <span class="token keyword">return</span> tl<span class="token punctuation">;</span> <span class="token comment">// 返回</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> master <span class="token operator">=</span> gsap<span class="token punctuation">.</span><span class="token function">timeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
master<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token function">doAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
master<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span> <span class="token function">doAnotherAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 添加更多的时间轴</span>
</code></pre></div><h4 id="effect"><a href="#effect" class="header-anchor"></a> effect</h4> <p>可以将自定义动画转换为<strong>命名</strong>效果，可以使用新的目标和配置随时调用它。当您具有动画标准或要从不同的上下文调用同一动画时，这特别有用</p> <div class="language-js extra-class"><pre class="language-js"><code>gsap<span class="token punctuation">.</span><span class="token function">registerEffect</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">'move'</span><span class="token punctuation">,</span>
    defaults<span class="token operator">:</span> <span class="token punctuation">{</span> duration<span class="token operator">:</span> <span class="token number">1.6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">effect</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">targets<span class="token punctuation">,</span> config</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> gsap<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>
            targets<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                duration<span class="token operator">:</span> config<span class="token punctuation">.</span>duration<span class="token punctuation">,</span>
                x<span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
                ease<span class="token operator">:</span> <span class="token string">'Bounce.easeInOut'</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
gsap<span class="token punctuation">.</span>effects<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>duration<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-使用控制方法"><a href="#_8-使用控制方法" class="header-anchor"></a> 8. 使用控制方法</h3> <p>GSAP提供了许多方法来控制补间或时间轴的状态。它们包括<code>.play()</code>，<code>.pause()</code>，<code>.reverse()</code>，<code>.progress()</code>，<code>.seek()</code>，<code>.restart()</code>，<code>.timeScale()</code> …</p> <p>使用控制方法可以使动画之间的过渡更加流畅（例如能够部分逆转）和更高的性能（通过重新使用相同的补间/时间轴，而不是每次都创建新实例）。通过更好地控制动画状态，它也可以帮助调试。</p> <h4 id="例子：触发动画的交互事件"><a href="#例子：触发动画的交互事件" class="header-anchor"></a> 例子：<strong>触发动画的交互事件</strong></h4> <p>当Hover的时候开始动画</p> <h4 id="例子：-根据滚动位置进行动画处理"><a href="#例子：-根据滚动位置进行动画处理" class="header-anchor"></a> 例子： <strong>根据滚动位置进行动画处理</strong></h4> <p>基于滚动位置触发动画。例如，一旦到达滚动位置，此演示将播放完整的动画</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> tl <span class="token operator">=</span> gsap<span class="token punctuation">.</span><span class="token function">timeline</span><span class="token punctuation">(</span><span class="token punctuation">{</span>paused<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tl<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>scale<span class="token operator">:</span> <span class="token number">0.7</span><span class="token punctuation">,</span> autoAlpha<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> duration<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 动画</span>

<span class="token keyword">function</span> <span class="token function">animateAtScrollPos</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">if</span><span class="token punctuation">(</span>scrollY <span class="token operator">&gt;</span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    tl<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> animateAtScrollPos<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;scroll&quot;</span><span class="token punctuation">,</span> animateAtScrollPos<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 监听滚动</span>
</code></pre></div><h3 id="_9-实用方法"><a href="#_9-实用方法" class="header-anchor"></a> 9.实用方法</h3> <p>GSAP具有内置的实用程序方法，可以使某些常见任务更容易。大多数都专注于以特定方式操纵值，这在生成或修改动画值时特别有用。我最常使用的有.wrap()，.random，.interpolate()，.distribute()，.pipe()，和.unitize()</p> <p><a href="https://greensock.com/docs/v3/GSAP/UtilityMethods/?ref=30488" target="_blank" rel="noopener noreferrer">更多<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <hr> <p><a href="https://css-tricks.com/tips-for-writing-animation-code-efficiently/" target="_blank" rel="noopener noreferrer">参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></article> <div class="tl-article-toc"><div class="vuepress-toc-item vuepress-toc-h3 active"><a href="#使用动画库">使用动画库</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_2-使用时间表">2.使用时间表</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_3-使用相对值">3.使用相对值</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_4-使用关键帧">4. 使用关键帧</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_5-使用智能默认设置">5. 使用智能默认设置</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_6-一次对多个元素进行动画处理">6. 一次对多个元素进行动画处理</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_7-模块动画">7. 模块动画</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_8-使用控制方法">8. 使用控制方法</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#_9-实用方法">9.实用方法</a></div></div></main></div></div><div class="global-ui"><div class="reading-progress bottom" data-v-21b39eda><div class="progress" data-v-21b39eda></div></div></div></div>
    <script src="/assets/js/app.2934c869.js" defer></script><script src="/assets/js/7.96aa0c69.js" defer></script><script src="/assets/js/44.b0216088.js" defer></script>
  </body>
</html>
