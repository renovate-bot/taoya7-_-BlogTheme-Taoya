(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{615:function(a,s,t){"use strict";t.r(s);var e=t(6),n=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[t("strong",[a._v("操作环境说明：")])]),a._v(" "),t("ul",[t("li",[t("p",[a._v("操作系统MacOS")])]),a._v(" "),t("li",[t("p",[a._v("Django3.1")])])]),a._v(" "),t("hr"),a._v(" "),t("h3",{attrs:{id:"创建一个django项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建一个django项目"}}),a._v(" 创建一个Django项目")]),a._v(" "),t("p",[a._v("请在本机创建")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("django-admin startproject demo\n")])])]),t("h3",{attrs:{id:"虚拟环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#虚拟环境"}}),a._v(" 虚拟环境")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("python3 -m venv venv\n")])])]),t("p",[a._v("然后激活虚拟环境")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("source")]),a._v(" venv/bin/activate\n")])])]),t("ul",[t("li",[a._v("创建依赖文件")])]),a._v(" "),t("p",[a._v("在项目根目录创建"),t("code",[a._v("requirements.txt")])]),a._v(" "),t("p",[a._v("或者自动生成文件")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("pip freeze "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" requirements.txt\n")])])]),t("ul",[t("li",[a._v("安装软件")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("pip "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" django\npip "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" uwsgi\n")])])]),t("h3",{attrs:{id:"dockerfile"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}}),a._v(" Dockerfile")]),a._v(" "),t("p",[a._v("在项目根目录创建Dockerfile文件。")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 下载镜像")]),a._v("\nFROM python:3.7.4-alpine3.10\n\nMAINTAINER Taoya"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[a._v("7")]),a._v("<")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("569781231")]),a._v("@qq.com"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 拷贝项目至容器内")]),a._v("\nADD "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" /usr/src/app\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 设置默认工作目录")]),a._v("\nWORKDIR /usr/src/app\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 安装项目依赖")]),a._v("\nRUN pip "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v("  -r requirements.txt\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 暴露端口")]),a._v("\nEXPOSE "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 运行")]),a._v("\nCMD python manage.py makemigrations\nCMD python manage.py migrate \nCMD python manage.py runserver "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0.0")]),a._v(".0.0:8000\n")])])]),t("p",[t("strong",[a._v("构建镜像")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker build -t taoya/django "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n")])])]),t("h3",{attrs:{id:"运行"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#运行"}}),a._v(" 运行")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("venv"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ➜   docker run -d -p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("8000")]),a._v(":8000 --name idjango taoya/django\n")])])]),t("p",[t("img",{attrs:{src:"http://alicdn.itaolaity.com/blog/20200904011524.png",alt:""}})]),a._v(" "),t("p",[t("img",{attrs:{src:"http://alicdn.itaolaity.com/blog/20200904011542.png",alt:""}})])])}),[],!1,null,null,null);s.default=n.exports}}]);