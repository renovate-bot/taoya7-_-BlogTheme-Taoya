(window.webpackJsonp=window.webpackJsonp||[]).push([[77],{613:function(a,t,s){"use strict";s.r(t);var n=s(6),e=Object(n.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h3",{attrs:{id:"构建vue-demo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建vue-demo"}}),a._v(" 构建Vue Demo")]),a._v(" "),s("ol",[s("li",[a._v("新建一个Vue项目")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("vue create docker-demo\n")])])]),s("p",[s("img",{attrs:{src:"http://alicdn.itaolaity.com/blog/20200903114558.png",alt:""}})]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 启动项目")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" serve\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 构建打包")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("yarn")]),a._v(" build\n")])])]),s("p",[a._v("默认情况下Dist就是我们需要的静态资源了。")]),a._v(" "),s("p",[a._v("前端项目分类")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("Nginx静态部署")])]),a._v(" "),s("li",[s("p",[a._v("Node服务部署")])]),a._v(" "),s("li",[s("p",[a._v("新建Dockerfile文件")])]),a._v(" "),s("li",[s("p",[a._v("准备镜像")]),a._v(" "),s("p",[a._v("Nginx")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("docker pull nginx\n")])])]),s("p",[a._v("在项目根目录创建Nginx配置文件")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("// 创建\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" default.conf\n\n// 内容\nserver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n server_name localhost"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    access_log  /var/log/nginx/host.access.log  main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    error_log  /var/log/nginx/error.log  error"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n    location / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n        root   /usr/share/nginx/html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        index  index.html index.htm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n        try_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$uri")]),a._v("/ /index.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("   \n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])])]),a._v(" "),s("li",[s("p",[a._v("编写Dockerfile文件")])])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("FROM nginx\nCOPY dist/ /usr/share/nginx/html/\nCOPY default.conf /etc/nginx/conf.d/default.conf\n")])])]),s("p",[a._v("第一行： 指定镜像基于nginx:latest镜像构建")]),a._v(" "),s("p",[a._v("第二行：将项目根目录复制到镜像中")]),a._v(" "),s("p",[a._v("第三行：将项目根目录配置文件复制到镜像中")]),a._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[a._v("构建镜像")])]),a._v(" "),s("p",[a._v("Docker 通过 build 命令来构建镜像")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("docker build -t vue-demo "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("\n\n-t 给镜像命名\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v(" 基于当前目录Dockerfile来构建\n")])])]),s("p",[s("img",{attrs:{src:"http://alicdn.itaolaity.com/blog/20200903134430.png",alt:""}})]),a._v(" "),s("p",[s("img",{attrs:{src:"http://alicdn.itaolaity.com/blog/20200903134512.png",alt:""}})]),a._v(" "),s("p",[a._v("可以看到打出133MB的镜像vue-demo")]),a._v(" "),s("p",[a._v("启动这个镜像")]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("➜  docker-demo git:"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("master"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ✗ docker run -d -p "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v(":80 3201fe1aafe9\n58c6f69a71dc6cc12bd84f4c72aad2473af20a3c966b4f374e1de9acd4339805\n")])])]),s("p",[a._v("打开浏览器可以访问")]),a._v(" "),s("p",[s("img",{attrs:{src:"http://alicdn.itaolaity.com/blog/20200903134636.png",alt:""}})]),a._v(" "),s("p",[a._v("通过客户端可以看到容器列表")]),a._v(" "),s("p",[s("img",{attrs:{src:"http://alicdn.itaolaity.com/blog/20200903134910.png",alt:""}})]),a._v(" "),s("hr")])}),[],!1,null,null,null);t.default=e.exports}}]);